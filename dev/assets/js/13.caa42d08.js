(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{354:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-ip.64868e1f.png"},355:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding.8789907b.png"},356:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding2.27222f76.png"},357:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding3.9ea3c10c.png"},358:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding4.0f0bb3a2.png"},359:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding5.21edc73e.png"},360:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding6.0f2993f1.png"},361:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-jinja.1c611c34.png"},362:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things.abb5bd4b.png"},363:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things2.2e6e9d16.png"},364:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things3.c8683e56.png"},365:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things4.b8d0101e.png"},366:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things5.c84ba146.png"},367:function(t,e,n){t.exports=n.p+"assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt.79c99c28.png"},428:function(t,e,n){"use strict";n.r(e);var a=n(14),i=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"integrate-openhab-3-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#integrate-openhab-3-4"}},[t._v("#")]),t._v(" Integrate OPENHAB 3/4")]),t._v(" "),e("p",[t._v("This tutorial will show how to integrate the BLE gateway to OpenHAB 3 or 4 leveraging the auto discovery functionality.\nAfter this tutorial, you should see your Bluetooth Low Energy devices in OpenHAB without any file based manual configuration.")]),t._v(" "),e("h2",{attrs:{id:"prerequisites"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),e("ul",[e("li",[t._v("OpenHAB 3.3 or higher")]),t._v(" "),e("li",[t._v("MQTT broker installed with or without authentication")]),t._v(" "),e("li",[t._v('A location defined in the "Model" section under "Settings"')])]),t._v(" "),e("h2",{attrs:{id:"ip-address-if-your-broker-is-installed-on-the-same-server-as-openhab"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ip-address-if-your-broker-is-installed-on-the-same-server-as-openhab"}},[t._v("#")]),t._v(" IP address (if your broker is installed on the same server as OpenHAB)")]),t._v(" "),e("p",[t._v("The goal is to disable the IPv6 address of the broker server, so that the gateway can connect through IPv4.")]),t._v(" "),e("ol",[e("li",[t._v("From the Administration click on Settings")]),t._v(" "),e("li",[t._v("Click on Network Settings")]),t._v(" "),e("li",[t._v("Click on Show Advanced")]),t._v(" "),e("li",[t._v("Disable IPv6")]),t._v(" "),e("li",[t._v("Click on Save")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(354),alt:"OpenHAB integration"}})]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("p",[t._v("If the broker is installed on another server you will also need to configure it with an IPv4 address.")])]),t._v(" "),e("h2",{attrs:{id:"install-the-mqtt-binding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-the-mqtt-binding"}},[t._v("#")]),t._v(" Install the MQTT binding")]),t._v(" "),e("ol",[e("li",[t._v("From the Administration click on Settings")]),t._v(" "),e("li",[t._v("Click on Bindings")]),t._v(" "),e("li",[t._v("Install the MQTT binding (you can search at the bottom right)")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(355),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("Once installed click on Things under Settings")]),t._v(" "),e("li",[t._v("Click on the + at the bottom right")]),t._v(" "),e("li",[t._v("Click on MQTT Binding")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(356),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"7"}},[e("li",[t._v("Click on MQTT broker")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(357),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"8"}},[e("li",[t._v('Enter for the "Broker Hostname/IP" field, the IP address of your broker, if it is installed on the same server you can enter '),e("code",[t._v("localhost")])])]),t._v(" "),e("p",[e("img",{attrs:{src:n(358),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"9"}},[e("li",[t._v('Click on "Show Advanced" if your broker has authentication activated, if not you can go to step 11')]),t._v(" "),e("li",[t._v("Enter the broker credentials: username and password")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(359),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"11"}},[e("li",[t._v('Click on Create Thing at the bottom, you should see your MQTT Broker in the Things list with the status "online"')])]),t._v(" "),e("p",[e("img",{attrs:{src:n(360),alt:"OpenHAB integration"}})]),t._v(" "),e("p",[t._v("Bravoüëè, second step done! Now let's add the Jinja transformation service.")]),t._v(" "),e("h2",{attrs:{id:"install-jinja-and-jsonpath-transformations"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-jinja-and-jsonpath-transformations"}},[t._v("#")]),t._v(" Install Jinja and JSONPath Transformations")]),t._v(" "),e("ol",[e("li",[t._v("From the Administration click on Settings")]),t._v(" "),e("li",[t._v("Click on Bindings")]),t._v(" "),e("li",[t._v("Install Jinja Transformation (you can search at the bottom right)")]),t._v(" "),e("li",[t._v("Install JSONPath Transformation")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(361),alt:"OpenHAB integration"}})]),t._v(" "),e("p",[t._v("Second step done!")]),t._v(" "),e("h2",{attrs:{id:"upload-openmqttgateway-to-an-esp32"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upload-openmqttgateway-to-an-esp32"}},[t._v("#")]),t._v(" Upload OpenMQTTGateway to an ESP32")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/upload/web-install.html"}},[t._v("Upload OpenMQTTGateway from the web")]),t._v(" by selecting the environment corresponding to your need.")],1),t._v(" "),e("p",[t._v("Or use another upload method from the Upload section.")]),t._v(" "),e("h2",{attrs:{id:"configure-openmqttgateway-from-the-web-portal"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configure-openmqttgateway-from-the-web-portal"}},[t._v("#")]),t._v(" Configure OpenMQTTGateway from the web portal")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/upload/portal.html"}},[t._v("Wifi and MQTT configuration")])],1),t._v(" "),e("p",[t._v("Or use another upload method from the Upload section that requires credentials before the build.")]),t._v(" "),e("p",[t._v("You should see the gateway connected to your broker by checking with an MQTT client like MQTT Explorer.")]),t._v(" "),e("p",[t._v("To make the auto discovery compatible with OpenHAB you have to send the following command with a retain flag.")]),t._v(" "),e("p",[e("code",[t._v('mosquitto_pub -t "home/OpenMQTTGateway/commands/MQTTtoSYS/config" -m \'{"ohdisc":true}\'')])]),t._v(" "),e("p",[t._v('You can also activate OpenHAB auto discovery by adding the gateway as a Thing, Model, and switching the button to ON. The name of the channel to add is "SYS: OpenHAB discovery".\nOnce activated restart OpenMQTTGateway.')]),t._v(" "),e("h2",{attrs:{id:"adding-the-things"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#adding-the-things"}},[t._v("#")]),t._v(" Adding the things")]),t._v(" "),e("ol",[e("li",[t._v('From the Administration click on "Things" under "Settings", you should see a number in the INBOX button')])]),t._v(" "),e("p",[e("img",{attrs:{src:n(362),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Click on INBOX, you should see your BLE devices and the gateway")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(363),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v('Click on a device, a pop up "Add as Thing" should appear')]),t._v(" "),e("li",[t._v("Rename it if you need, and click OK, repeat for each Thing discovered. The devices should appears as online progressively.")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(364),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v("Click on Model")]),t._v(" "),e("li",[t._v("Select the location of where you want to create the Equipment")]),t._v(" "),e("li",[t._v('Click on "Create Equipment from Thing"')]),t._v(" "),e("li",[t._v("Click on Thing")]),t._v(" "),e("li",[t._v("Select a Thing")]),t._v(" "),e("li",[t._v("Rename your Equipment if you need")]),t._v(" "),e("li",[t._v("Select the Channels")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(365),alt:"OpenHAB integration"}})]),t._v(" "),e("ol",{attrs:{start:"12"}},[e("li",[t._v('Click on "Add to Model"')]),t._v(" "),e("li",[t._v("Go to Model, if you unfold your location and Equipment you should be able to see values")])]),t._v(" "),e("p",[e("img",{attrs:{src:n(366),alt:"OpenHAB integration"}})]),t._v(" "),e("p",[t._v("Congratulationüéâ! You were able to get data from your BLE sensors into OpenHAB. You can now add the others and use the data to build pages, leverage rules and enjoy all the function of your Home Automation controller with BLE devices.")]),t._v(" "),e("p",[e("img",{attrs:{src:n(367),alt:"OpenHAB integration"}})])])}),[],!1,null,null,null);e.default=i.exports}}]);