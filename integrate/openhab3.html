<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integrate OPENHAB3 | OpenMQTTGateway v1.6.0</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" href="/img/Openmqttgateway_logo_mini.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script type="module" src="https://unpkg.com/esp-web-tools@3.4.2/dist/web/install-button.js?module"></script>
    <meta name="description" content="One gateway, many technologies: MQTT gateway for ESP8266, ESP32, Sonoff RF Bridge or Arduino with bidirectional 433mhz/315mhz/868mhz, Infrared communications, BLE, beacons detection, mi flora / mi jia / LYWSD02/ Mi Scale compatibility, SMS &amp; LORA.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/favicon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.7f8e66f6.css" as="style"><link rel="preload" href="/assets/js/app.a8101403.js" as="script"><link rel="preload" href="/assets/js/2.a6330fef.js" as="script"><link rel="preload" href="/assets/js/5.b38ebc20.js" as="script"><link rel="prefetch" href="/assets/js/10.3bf3392e.js"><link rel="prefetch" href="/assets/js/100.864bcaae.js"><link rel="prefetch" href="/assets/js/101.7e051fa6.js"><link rel="prefetch" href="/assets/js/102.fc219a72.js"><link rel="prefetch" href="/assets/js/103.7e8f2737.js"><link rel="prefetch" href="/assets/js/104.ba4237ad.js"><link rel="prefetch" href="/assets/js/105.0ec04e8a.js"><link rel="prefetch" href="/assets/js/106.fac6d9bd.js"><link rel="prefetch" href="/assets/js/107.41c49f97.js"><link rel="prefetch" href="/assets/js/108.61155cf4.js"><link rel="prefetch" href="/assets/js/109.bb845863.js"><link rel="prefetch" href="/assets/js/11.e740d1f2.js"><link rel="prefetch" href="/assets/js/110.abc5d7c2.js"><link rel="prefetch" href="/assets/js/111.b8497c11.js"><link rel="prefetch" href="/assets/js/112.c36ad65f.js"><link rel="prefetch" href="/assets/js/113.5f3141de.js"><link rel="prefetch" href="/assets/js/114.f990b138.js"><link rel="prefetch" href="/assets/js/115.8eed4579.js"><link rel="prefetch" href="/assets/js/116.72e2c9f2.js"><link rel="prefetch" href="/assets/js/117.b56c732f.js"><link rel="prefetch" href="/assets/js/118.e358b51e.js"><link rel="prefetch" href="/assets/js/119.f7dc3fd2.js"><link rel="prefetch" href="/assets/js/12.12f354b3.js"><link rel="prefetch" href="/assets/js/13.c98903f6.js"><link rel="prefetch" href="/assets/js/14.9f5422da.js"><link rel="prefetch" href="/assets/js/15.53860aa8.js"><link rel="prefetch" href="/assets/js/16.8ce0807b.js"><link rel="prefetch" href="/assets/js/17.3f431501.js"><link rel="prefetch" href="/assets/js/18.abbfca7e.js"><link rel="prefetch" href="/assets/js/19.c3f8cea0.js"><link rel="prefetch" href="/assets/js/20.8772f436.js"><link rel="prefetch" href="/assets/js/21.ae3dc22f.js"><link rel="prefetch" href="/assets/js/22.82c5c00b.js"><link rel="prefetch" href="/assets/js/23.a7e36505.js"><link rel="prefetch" href="/assets/js/24.872a1e59.js"><link rel="prefetch" href="/assets/js/25.68cf5ee4.js"><link rel="prefetch" href="/assets/js/26.803f9d00.js"><link rel="prefetch" href="/assets/js/27.252738c2.js"><link rel="prefetch" href="/assets/js/28.165f5a16.js"><link rel="prefetch" href="/assets/js/29.342deda1.js"><link rel="prefetch" href="/assets/js/3.db6ea314.js"><link rel="prefetch" href="/assets/js/30.a4a95841.js"><link rel="prefetch" href="/assets/js/31.2284890e.js"><link rel="prefetch" href="/assets/js/32.e0886312.js"><link rel="prefetch" href="/assets/js/33.4b3e573d.js"><link rel="prefetch" href="/assets/js/34.4b6249db.js"><link rel="prefetch" href="/assets/js/35.35226a53.js"><link rel="prefetch" href="/assets/js/36.1c738f7b.js"><link rel="prefetch" href="/assets/js/37.a13982eb.js"><link rel="prefetch" href="/assets/js/38.7c8a34c4.js"><link rel="prefetch" href="/assets/js/39.35df8fb3.js"><link rel="prefetch" href="/assets/js/4.463f3dd1.js"><link rel="prefetch" href="/assets/js/40.91cb9696.js"><link rel="prefetch" href="/assets/js/41.99b64b2a.js"><link rel="prefetch" href="/assets/js/42.748064dd.js"><link rel="prefetch" href="/assets/js/43.59829f67.js"><link rel="prefetch" href="/assets/js/44.194d6404.js"><link rel="prefetch" href="/assets/js/45.51f9ed38.js"><link rel="prefetch" href="/assets/js/46.4e75d6a6.js"><link rel="prefetch" href="/assets/js/47.5e7f402c.js"><link rel="prefetch" href="/assets/js/48.50581f5d.js"><link rel="prefetch" href="/assets/js/49.38813a3e.js"><link rel="prefetch" href="/assets/js/50.fca7116c.js"><link rel="prefetch" href="/assets/js/51.79d51f20.js"><link rel="prefetch" href="/assets/js/52.276b36f2.js"><link rel="prefetch" href="/assets/js/53.48628f9e.js"><link rel="prefetch" href="/assets/js/54.f4629f0b.js"><link rel="prefetch" href="/assets/js/55.8bd72726.js"><link rel="prefetch" href="/assets/js/56.4e9649dd.js"><link rel="prefetch" href="/assets/js/57.f661d227.js"><link rel="prefetch" href="/assets/js/58.3dbefc68.js"><link rel="prefetch" href="/assets/js/59.dca92ef6.js"><link rel="prefetch" href="/assets/js/6.b8e1b615.js"><link rel="prefetch" href="/assets/js/60.7ef87e1c.js"><link rel="prefetch" href="/assets/js/61.f644b0b7.js"><link rel="prefetch" href="/assets/js/62.d17ad4e1.js"><link rel="prefetch" href="/assets/js/63.a3b06db7.js"><link rel="prefetch" href="/assets/js/64.02232795.js"><link rel="prefetch" href="/assets/js/65.8b531e34.js"><link rel="prefetch" href="/assets/js/66.45c70fc5.js"><link rel="prefetch" href="/assets/js/67.09762414.js"><link rel="prefetch" href="/assets/js/68.28adeeb3.js"><link rel="prefetch" href="/assets/js/69.71fd0a70.js"><link rel="prefetch" href="/assets/js/7.40835015.js"><link rel="prefetch" href="/assets/js/70.4afde4dc.js"><link rel="prefetch" href="/assets/js/71.36d570b5.js"><link rel="prefetch" href="/assets/js/72.dae075c9.js"><link rel="prefetch" href="/assets/js/73.1f8230c8.js"><link rel="prefetch" href="/assets/js/74.b03bb874.js"><link rel="prefetch" href="/assets/js/75.33e77ff5.js"><link rel="prefetch" href="/assets/js/76.f6b3546f.js"><link rel="prefetch" href="/assets/js/77.20276536.js"><link rel="prefetch" href="/assets/js/78.4150f2bb.js"><link rel="prefetch" href="/assets/js/79.8e13dcf4.js"><link rel="prefetch" href="/assets/js/8.91111a02.js"><link rel="prefetch" href="/assets/js/80.77656735.js"><link rel="prefetch" href="/assets/js/81.794b7874.js"><link rel="prefetch" href="/assets/js/82.4b353405.js"><link rel="prefetch" href="/assets/js/83.186428bd.js"><link rel="prefetch" href="/assets/js/84.802c2abf.js"><link rel="prefetch" href="/assets/js/85.d2f38121.js"><link rel="prefetch" href="/assets/js/86.1d8f9c18.js"><link rel="prefetch" href="/assets/js/87.d4195c63.js"><link rel="prefetch" href="/assets/js/88.47bb2294.js"><link rel="prefetch" href="/assets/js/89.86910dc4.js"><link rel="prefetch" href="/assets/js/9.7d95995f.js"><link rel="prefetch" href="/assets/js/90.5ef2583f.js"><link rel="prefetch" href="/assets/js/91.8e431909.js"><link rel="prefetch" href="/assets/js/92.ae136b5c.js"><link rel="prefetch" href="/assets/js/93.27cb3dd1.js"><link rel="prefetch" href="/assets/js/94.45aa70b7.js"><link rel="prefetch" href="/assets/js/95.5c8c9473.js"><link rel="prefetch" href="/assets/js/96.dfdba9f5.js"><link rel="prefetch" href="/assets/js/97.c01f200e.js"><link rel="prefetch" href="/assets/js/98.d06ed080.js"><link rel="prefetch" href="/assets/js/99.f20c2428.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f8e66f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OpenMQTTGateway v1.6.0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://shop.theengs.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Shop🆕
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_self" class="nav-link external">
  Devices
  <!----></a></div><div class="nav-item"><a href="/upload/web-install.html" class="nav-link">
  Upload
</a></div><div class="nav-item"><a href="https://app.theengs.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Theengs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://shop.theengs.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Shop🆕
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_self" class="nav-link external">
  Devices
  <!----></a></div><div class="nav-item"><a href="/upload/web-install.html" class="nav-link">
  Upload
</a></div><div class="nav-item"><a href="https://app.theengs.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Theengs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">0 - What is it for 🏠</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisites🧭</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2 - Set it up 🔨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3 - Upload ➡️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4 - Use ✈️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>5 - Integrate 🎉</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/integrate/openhab2.html" class="sidebar-link">Integrate OPENHAB2</a></li><li><a href="/integrate/openhab3.html" aria-current="page" class="active sidebar-link">Integrate OPENHAB3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/integrate/openhab3.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab3.html#ip-address-if-your-broker-is-installed-on-the-same-server-as-openhab" class="sidebar-link">IP address (if your broker is installed on the same server as OpenHAB)</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab3.html#install-the-mqtt-binding" class="sidebar-link">Install the MQTT binding</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab3.html#install-jinja-and-jsonpath-transformations" class="sidebar-link">Install Jinja and JSONPath Transformations</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab3.html#upload-openmqttgateway-to-an-esp32" class="sidebar-link">Upload OpenMQTTGateway to an ESP32</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab3.html#configure-openmqttgateway-from-the-web-portal" class="sidebar-link">Configure OpenMQTTGateway from the web portal</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab3.html#adding-the-things" class="sidebar-link">Adding the things</a></li></ul></li><li><a href="/integrate/home_assistant.html" class="sidebar-link">Integrate Home Assistant</a></li><li><a href="/integrate/node_red.html" class="sidebar-link">Integrate Node-Red</a></li><li><a href="/integrate/aws_iot.html" class="sidebar-link">Integrate AWS IOT</a></li><li><a href="/integrate/jeedom.html" class="sidebar-link">Integrate Jeedom</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6 - Participate 💻</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="integrate-openhab3"><a href="#integrate-openhab3" class="header-anchor">#</a> Integrate OPENHAB3</h1> <p>This tutorial will show how to integrate the BLE gateway to OpenHAB3 leveraging the auto discovery functionality.
After this tutorial, you should see your Bluetooth Low Energy devices in OpenHAB3 without any file based manual configuration.</p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <ul><li>OpenHAB 3.3 or higher</li> <li>MQTT broker installed with or without authentication</li> <li>A location defined in the &quot;Model&quot; section under &quot;Settings&quot;</li></ul> <h2 id="ip-address-if-your-broker-is-installed-on-the-same-server-as-openhab"><a href="#ip-address-if-your-broker-is-installed-on-the-same-server-as-openhab" class="header-anchor">#</a> IP address (if your broker is installed on the same server as OpenHAB)</h2> <p>The goal is to disable the IPv6 address of the broker server, so that the gateway can connect through IPv4.</p> <ol><li>From the Administration click on Settings</li> <li>Click on Network Settings</li> <li>Click on Show Advanced</li> <li>Disable IPv6</li> <li>Click on Save</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-ip.64868e1f.png" alt=""></p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>If the broker is installed on another server you will also need to configure it with an IPv4 address.</p></div> <h2 id="install-the-mqtt-binding"><a href="#install-the-mqtt-binding" class="header-anchor">#</a> Install the MQTT binding</h2> <ol><li>From the Administration click on Settings</li> <li>Click on Bindings</li> <li>Install the MQTT binding (you can search at the bottom right)</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding.8789907b.png" alt=""></p> <ol start="4"><li>Once installed click on Things under Settings</li> <li>Click on the + at the bottom right</li> <li>Click on MQTT Binding</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding2.27222f76.png" alt=""></p> <ol start="7"><li>Click on MQTT broker</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding3.9ea3c10c.png" alt=""></p> <ol start="8"><li>Enter for the &quot;Broker Hostname/IP&quot; field, the IP address of your broker, if it is installed on the same server you can enter <code>localhost</code></li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding4.0f0bb3a2.png" alt=""></p> <ol start="9"><li>Click on &quot;Show Advanced&quot; if your broker has authentication activated, if not you can go to step 11</li> <li>Enter the broker credentials: username and password</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding5.21edc73e.png" alt=""></p> <ol start="11"><li>Click on Create Thing at the bottom, you should see your MQTT Broker in the Things list with the status &quot;online&quot;</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-binding6.0f2993f1.png" alt=""></p> <p>Bravo👏, second step done! Now let's add the Jinja transformation service.</p> <h2 id="install-jinja-and-jsonpath-transformations"><a href="#install-jinja-and-jsonpath-transformations" class="header-anchor">#</a> Install Jinja and JSONPath Transformations</h2> <ol><li>From the Administration click on Settings</li> <li>Click on Bindings</li> <li>Install Jinja Transformation (you can search at the bottom right)</li> <li>Install JSONPath Transformation</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-jinja.1c611c34.png" alt=""></p> <p>Second step done!</p> <h2 id="upload-openmqttgateway-to-an-esp32"><a href="#upload-openmqttgateway-to-an-esp32" class="header-anchor">#</a> Upload OpenMQTTGateway to an ESP32</h2> <p><a href="/upload/web-install.html">Upload OpenMQTTGateway from the web</a> by selecting the environment corresponding to your need.</p> <p>Or use another upload method from the Upload section.</p> <h2 id="configure-openmqttgateway-from-the-web-portal"><a href="#configure-openmqttgateway-from-the-web-portal" class="header-anchor">#</a> Configure OpenMQTTGateway from the web portal</h2> <p><a href="/upload/portal.html">Wifi and MQTT configuration</a></p> <p>Or use another upload method from the Upload section that requires credentials before the build.</p> <p>You should see the gateway connected to your broker by checking with an MQTT client like MQTT Explorer.</p> <p>To make the auto discovery compatible with OpenHAB you have to send the following command with a retain flag.</p> <p><code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoSYS/config&quot; -m '{&quot;ohdiscovery&quot;:true}'</code></p> <h2 id="adding-the-things"><a href="#adding-the-things" class="header-anchor">#</a> Adding the things</h2> <ol><li>From the Administration click on &quot;Things&quot; under &quot;Settings&quot;, you should see a number in the INBOX button</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things.abb5bd4b.png" alt=""></p> <ol start="2"><li>Click on INBOX, you should see your BLE devices and the gateway</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things2.2e6e9d16.png" alt=""></p> <ol start="3"><li>Click on a device, a pop up &quot;Add as Thing&quot; should appear</li> <li>Rename it if you need, and click OK, repeat for each Thing discovered. The devices should appears as online progressively.</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things3.c8683e56.png" alt=""></p> <ol start="5"><li>Click on Model</li> <li>Select the location of where you want to create the Equipment</li> <li>Click on &quot;Create Equipment from Thing&quot;</li> <li>Click on Thing</li> <li>Select a Thing</li> <li>Rename your Equipment if you need</li> <li>Select the Channels</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things4.b8d0101e.png" alt=""></p> <ol start="12"><li>Click on &quot;Add to Model&quot;</li> <li>Go to Model, if you unfold your location and Equipment you should be able to see values</li></ol> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt-things5.c84ba146.png" alt=""></p> <p>Congratulation🎉! You were able to get data from your BLE sensors into OpenHAB. You can now add the others and use the data to build pages, leverage rules and enjoy all the function of your Home Automation controller with BLE devices.</p> <p><img src="/assets/img/OpenMQTTGateway-OpenHAB-Theengs-mqtt.79c99c28.png" alt=""></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/1technophile/OpenMQTTGateway/edit/development/docs/integrate/openhab3.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/10/2023, 8:01:17 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/integrate/openhab2.html" class="prev">
        Integrate OPENHAB2
      </a></span> <span class="next"><a href="/integrate/home_assistant.html">
        Integrate Home Assistant
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a8101403.js" defer></script><script src="/assets/js/2.a6330fef.js" defer></script><script src="/assets/js/5.b38ebc20.js" defer></script>
  </body>
</html>
