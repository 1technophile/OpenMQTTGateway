<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integrate Home Assistant | OpenMQTTGateway v1.7.0</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" href="/img/Openmqttgateway_logo_mini.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script type="module" src="https://unpkg.com/esp-web-tools@3.4.2/dist/web/install-button.js?module"></script>
    <meta name="description" content="One gateway, many technologies: MQTT gateway for ESP8266, ESP32, Sonoff RF Bridge or Arduino with bidirectional 433mhz/315mhz/868mhz, Infrared communications, BLE, beacons detection, mi flora / mi jia / LYWSD02/ Mi Scale compatibility, SMS &amp; LORA.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/favicon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.7f8e66f6.css" as="style"><link rel="preload" href="/assets/js/app.5c4eae9b.js" as="script"><link rel="preload" href="/assets/js/2.fdf4d158.js" as="script"><link rel="preload" href="/assets/js/8.9c531400.js" as="script"><link rel="prefetch" href="/assets/js/10.dd089e98.js"><link rel="prefetch" href="/assets/js/100.feafc77f.js"><link rel="prefetch" href="/assets/js/101.769c0c52.js"><link rel="prefetch" href="/assets/js/102.f0a9e9c6.js"><link rel="prefetch" href="/assets/js/103.d6429bec.js"><link rel="prefetch" href="/assets/js/104.17259634.js"><link rel="prefetch" href="/assets/js/105.67c601ff.js"><link rel="prefetch" href="/assets/js/106.ec2f8600.js"><link rel="prefetch" href="/assets/js/107.d80f1ca4.js"><link rel="prefetch" href="/assets/js/108.740b44ee.js"><link rel="prefetch" href="/assets/js/109.a09c8481.js"><link rel="prefetch" href="/assets/js/11.8e3da4d5.js"><link rel="prefetch" href="/assets/js/110.2d0ada7e.js"><link rel="prefetch" href="/assets/js/111.b7478092.js"><link rel="prefetch" href="/assets/js/112.80588721.js"><link rel="prefetch" href="/assets/js/113.c4baa83d.js"><link rel="prefetch" href="/assets/js/114.0a4f4990.js"><link rel="prefetch" href="/assets/js/115.e95b8ca8.js"><link rel="prefetch" href="/assets/js/116.ee192294.js"><link rel="prefetch" href="/assets/js/117.e23f9919.js"><link rel="prefetch" href="/assets/js/118.fbcffaa5.js"><link rel="prefetch" href="/assets/js/119.57871c89.js"><link rel="prefetch" href="/assets/js/12.b5a20c43.js"><link rel="prefetch" href="/assets/js/120.84ee7413.js"><link rel="prefetch" href="/assets/js/121.39be8b3a.js"><link rel="prefetch" href="/assets/js/122.7b16bc6d.js"><link rel="prefetch" href="/assets/js/13.a49cd58f.js"><link rel="prefetch" href="/assets/js/14.c88d4466.js"><link rel="prefetch" href="/assets/js/15.1ace2384.js"><link rel="prefetch" href="/assets/js/16.2fbfdd3f.js"><link rel="prefetch" href="/assets/js/17.bd7cf1b8.js"><link rel="prefetch" href="/assets/js/18.6db9312f.js"><link rel="prefetch" href="/assets/js/19.65b17127.js"><link rel="prefetch" href="/assets/js/20.ea752e98.js"><link rel="prefetch" href="/assets/js/21.18d93d02.js"><link rel="prefetch" href="/assets/js/22.3bcb6ec9.js"><link rel="prefetch" href="/assets/js/23.9f738f3b.js"><link rel="prefetch" href="/assets/js/24.6de3bada.js"><link rel="prefetch" href="/assets/js/25.f5cbd090.js"><link rel="prefetch" href="/assets/js/26.b5b60efc.js"><link rel="prefetch" href="/assets/js/27.220fb00d.js"><link rel="prefetch" href="/assets/js/28.5a7d40b2.js"><link rel="prefetch" href="/assets/js/29.d4675ca1.js"><link rel="prefetch" href="/assets/js/3.d17a1a36.js"><link rel="prefetch" href="/assets/js/30.8f04903f.js"><link rel="prefetch" href="/assets/js/31.e78643eb.js"><link rel="prefetch" href="/assets/js/32.4516dfd8.js"><link rel="prefetch" href="/assets/js/33.9bddc3e6.js"><link rel="prefetch" href="/assets/js/34.e9ee0ad9.js"><link rel="prefetch" href="/assets/js/35.27d21c4b.js"><link rel="prefetch" href="/assets/js/36.f55fd62f.js"><link rel="prefetch" href="/assets/js/37.f674b8c4.js"><link rel="prefetch" href="/assets/js/38.48356ab2.js"><link rel="prefetch" href="/assets/js/39.6722e10c.js"><link rel="prefetch" href="/assets/js/4.0b272843.js"><link rel="prefetch" href="/assets/js/40.ef8e0456.js"><link rel="prefetch" href="/assets/js/41.1d35e582.js"><link rel="prefetch" href="/assets/js/42.c36811a8.js"><link rel="prefetch" href="/assets/js/43.30bba30a.js"><link rel="prefetch" href="/assets/js/44.5226bdb4.js"><link rel="prefetch" href="/assets/js/45.1020af3e.js"><link rel="prefetch" href="/assets/js/46.fa499b89.js"><link rel="prefetch" href="/assets/js/47.9420766b.js"><link rel="prefetch" href="/assets/js/48.77b00142.js"><link rel="prefetch" href="/assets/js/49.97c36f7d.js"><link rel="prefetch" href="/assets/js/5.343b1297.js"><link rel="prefetch" href="/assets/js/50.f0ae9ce5.js"><link rel="prefetch" href="/assets/js/51.ee256a31.js"><link rel="prefetch" href="/assets/js/52.ef8a3534.js"><link rel="prefetch" href="/assets/js/53.741b1340.js"><link rel="prefetch" href="/assets/js/54.eef1e2a9.js"><link rel="prefetch" href="/assets/js/55.c54bf265.js"><link rel="prefetch" href="/assets/js/56.eeef2d3c.js"><link rel="prefetch" href="/assets/js/57.fe3243d4.js"><link rel="prefetch" href="/assets/js/58.f2adc07e.js"><link rel="prefetch" href="/assets/js/59.2215b159.js"><link rel="prefetch" href="/assets/js/6.a203e05b.js"><link rel="prefetch" href="/assets/js/60.d73f8bf1.js"><link rel="prefetch" href="/assets/js/61.ec939358.js"><link rel="prefetch" href="/assets/js/62.b8380823.js"><link rel="prefetch" href="/assets/js/63.a6109c98.js"><link rel="prefetch" href="/assets/js/64.b088a8a8.js"><link rel="prefetch" href="/assets/js/65.e37a8912.js"><link rel="prefetch" href="/assets/js/66.459603cd.js"><link rel="prefetch" href="/assets/js/67.69a2d01f.js"><link rel="prefetch" href="/assets/js/68.719e7c20.js"><link rel="prefetch" href="/assets/js/69.283c5e4a.js"><link rel="prefetch" href="/assets/js/7.359e9c30.js"><link rel="prefetch" href="/assets/js/70.693bc261.js"><link rel="prefetch" href="/assets/js/71.270b81d0.js"><link rel="prefetch" href="/assets/js/72.b230b68d.js"><link rel="prefetch" href="/assets/js/73.365a24cf.js"><link rel="prefetch" href="/assets/js/74.e0a2c966.js"><link rel="prefetch" href="/assets/js/75.f097ebac.js"><link rel="prefetch" href="/assets/js/76.c76f3d1d.js"><link rel="prefetch" href="/assets/js/77.550b4a66.js"><link rel="prefetch" href="/assets/js/78.bc2ede0c.js"><link rel="prefetch" href="/assets/js/79.c0531cd4.js"><link rel="prefetch" href="/assets/js/80.3b482111.js"><link rel="prefetch" href="/assets/js/81.42d31027.js"><link rel="prefetch" href="/assets/js/82.b0b5ad51.js"><link rel="prefetch" href="/assets/js/83.4c0ddc47.js"><link rel="prefetch" href="/assets/js/84.393040e2.js"><link rel="prefetch" href="/assets/js/85.0a363f76.js"><link rel="prefetch" href="/assets/js/86.1ea0a8df.js"><link rel="prefetch" href="/assets/js/87.6db29950.js"><link rel="prefetch" href="/assets/js/88.dc959761.js"><link rel="prefetch" href="/assets/js/89.4dad14d3.js"><link rel="prefetch" href="/assets/js/9.fa445a19.js"><link rel="prefetch" href="/assets/js/90.afb1587b.js"><link rel="prefetch" href="/assets/js/91.d83046e1.js"><link rel="prefetch" href="/assets/js/92.b7551eb4.js"><link rel="prefetch" href="/assets/js/93.5381f3ad.js"><link rel="prefetch" href="/assets/js/94.3e9a543e.js"><link rel="prefetch" href="/assets/js/95.3e77f72e.js"><link rel="prefetch" href="/assets/js/96.ba8a7553.js"><link rel="prefetch" href="/assets/js/97.44a2db95.js"><link rel="prefetch" href="/assets/js/98.f2c78390.js"><link rel="prefetch" href="/assets/js/99.79c7757b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f8e66f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OpenMQTTGateway v1.7.0</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.theengs.io" target="_self" class="nav-link external">
  Home
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Use cases" class="dropdown-title"><span class="title">Use cases</span> <span class="arrow down"></span></button> <button type="button" aria-label="Use cases" class="mobile-dropdown-title"><span class="title">Use cases</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/smarthome.html" target="_self" class="nav-link external">
  Smart Home
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/iot.html" target="_self" class="nav-link external">
  IoT
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/research.html" target="_self" class="nav-link external">
  Research
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Solutions" class="dropdown-title"><span class="title">Solutions</span> <span class="arrow down"></span></button> <button type="button" aria-label="Solutions" class="mobile-dropdown-title"><span class="title">Solutions</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Hardware
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://shop.theengs.io/products/theengs-plug-smart-plug-ble-gateway-and-energy-consumption" target="_self" class="nav-link external">
  Theengs Plug
  <!----></a></li><li class="dropdown-subitem"><a href="https://shop.theengs.io/products/theengs-bridge-esp32-ble-mqtt-gateway-with-ethernet-and-external-antenna" target="_self" class="nav-link external">
  Theengs Bridge
  <!----></a></li></ul></li><li class="dropdown-item"><h4>
          Software
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://app.theengs.io" target="_self" class="nav-link external">
  Mobile App
  <!----></a></li><li class="dropdown-subitem"><a href="https://docs.openmqttgateway.com" target="_self" class="nav-link external">
  OpenMQTTGateway
  <!----></a></li><li class="dropdown-subitem"><a href="https://gateway.theengs.io" target="_self" class="nav-link external">
  Gateway
  <!----></a></li></ul></li><li class="dropdown-item"><h4>
          Core
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://decoder.theengs.io" target="_self" class="nav-link external">
  Decoder
  <!----></a></li><li class="dropdown-subitem"><a href="https://parser.theengs.io" target="_self" class="nav-link external">
  Web Parser
  <!----></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://decoder.theengs.io/devices/devices.html" target="_self" class="nav-link external">
  Compatible devices
  <!----></a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://shop.theengs.io/" target="_self" class="nav-link external">
  Shop
  <!----></a></div><div class="nav-item"><a href="https://github.com/sponsors/theengs" target="_self" class="nav-link external">
  Sponsor 🤍
  <!----></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.theengs.io" target="_self" class="nav-link external">
  Home
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Use cases" class="dropdown-title"><span class="title">Use cases</span> <span class="arrow down"></span></button> <button type="button" aria-label="Use cases" class="mobile-dropdown-title"><span class="title">Use cases</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/smarthome.html" target="_self" class="nav-link external">
  Smart Home
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/iot.html" target="_self" class="nav-link external">
  IoT
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/research.html" target="_self" class="nav-link external">
  Research
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Solutions" class="dropdown-title"><span class="title">Solutions</span> <span class="arrow down"></span></button> <button type="button" aria-label="Solutions" class="mobile-dropdown-title"><span class="title">Solutions</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Hardware
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://shop.theengs.io/products/theengs-plug-smart-plug-ble-gateway-and-energy-consumption" target="_self" class="nav-link external">
  Theengs Plug
  <!----></a></li><li class="dropdown-subitem"><a href="https://shop.theengs.io/products/theengs-bridge-esp32-ble-mqtt-gateway-with-ethernet-and-external-antenna" target="_self" class="nav-link external">
  Theengs Bridge
  <!----></a></li></ul></li><li class="dropdown-item"><h4>
          Software
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://app.theengs.io" target="_self" class="nav-link external">
  Mobile App
  <!----></a></li><li class="dropdown-subitem"><a href="https://docs.openmqttgateway.com" target="_self" class="nav-link external">
  OpenMQTTGateway
  <!----></a></li><li class="dropdown-subitem"><a href="https://gateway.theengs.io" target="_self" class="nav-link external">
  Gateway
  <!----></a></li></ul></li><li class="dropdown-item"><h4>
          Core
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://decoder.theengs.io" target="_self" class="nav-link external">
  Decoder
  <!----></a></li><li class="dropdown-subitem"><a href="https://parser.theengs.io" target="_self" class="nav-link external">
  Web Parser
  <!----></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://decoder.theengs.io/devices/devices.html" target="_self" class="nav-link external">
  Compatible devices
  <!----></a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://shop.theengs.io/" target="_self" class="nav-link external">
  Shop
  <!----></a></div><div class="nav-item"><a href="https://github.com/sponsors/theengs" target="_self" class="nav-link external">
  Sponsor 🤍
  <!----></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">0 - What is it for 🏠</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisites🧭</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2 - Set it up 🔨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3 - Upload ➡️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4 - Use ✈️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>5 - Integrate 🎉</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/integrate/openhab2.html" class="sidebar-link">Integrate OPENHAB2</a></li><li><a href="/integrate/openhab3.html" class="sidebar-link">Integrate OPENHAB 3/4</a></li><li><a href="/integrate/home_assistant.html" aria-current="page" class="active sidebar-link">Integrate Home Assistant</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/integrate/home_assistant.html#auto-discovery" class="sidebar-link">Auto discovery</a></li><li class="sidebar-sub-header"><a href="/integrate/home_assistant.html#rtl-433-auto-discovery-specificity" class="sidebar-link">RTL_433 auto discovery specificity</a></li><li class="sidebar-sub-header"><a href="/integrate/home_assistant.html#mqtt-device-trigger-and-rf" class="sidebar-link">MQTT Device Trigger and RF</a></li><li class="sidebar-sub-header"><a href="/integrate/home_assistant.html#manual-integration-examples" class="sidebar-link">Manual integration examples</a></li></ul></li><li><a href="/integrate/node_red.html" class="sidebar-link">Integrate Node-Red</a></li><li><a href="/integrate/aws_iot.html" class="sidebar-link">Integrate AWS IOT</a></li><li><a href="/integrate/jeedom.html" class="sidebar-link">Integrate Jeedom</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6 - Participate 💻</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="integrate-home-assistant"><a href="#integrate-home-assistant" class="header-anchor">#</a> Integrate Home Assistant</h1> <p>Home Assistant provide the <a href="https://www.home-assistant.io/integrations/mqtt/" target="_blank" rel="noopener noreferrer">MQTT integration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and through this integration it is possible to exploit and manage the messages published by OpenMQTTGateway.</p> <p>Once this integration on home assistant is configured with the same MQTT broker, it is possible to create devices manually or through the autodiscovery function.</p> <h2 id="auto-discovery"><a href="#auto-discovery" class="header-anchor">#</a> Auto discovery</h2> <p>From Home Assistant site</p> <blockquote><p>The discovery of MQTT devices will enable one to use MQTT devices with only minimal configuration effort on the side of Home Assistant. The configuration is done on the device itself and the topic used by the device.</p></blockquote> <p>On OpenMQTTGateway the Home Assistant discovery is enabled by default on all binaries and platformio configurations except for UNO. With Arduino IDE please read the <a href="../upload/advanced-configuration#auto-discovery">advanced configuration section</a> of the documentation. Here are a few tips for activating discovery on Home Assistant, but for detailed configuration please refer to the Home Assistant website.</p> <p>Enable discovery on your MQTT integration in HASS (activated per default).</p> <p><img src="/assets/img/OpenMQTTGateway-Configuration-Home-Assistant-Discovery-Integration.f26d4860.png" alt="Home Assistant Auto Discovery"></p> <p>The gateway will need an MQTT username and password, you have to create a new user(recommended) into Home Assistant-&gt;Configuration-&gt;Users (available in admin mode) or use an existing username/pwd combination (not recommended). This user doesn't need to be an administrator.</p> <p><img src="/assets/img/OpenMQTTGateway-Configuration-Home-Assistant.3ca02117.png" alt="Home Assistant Auto Discovery"></p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>The max size of the username and password is 64 characters.</p></div> <p>OMG will use the auto discovery functionality of home assistant to create gateway and sensors into your HASS instance automatically.</p> <p><img src="/assets/img/OpenMQTTGateway_auto_discovery_Gateway_Home_Assistant.3678ed94.gif" alt="Home Assistant Auto Discovery"></p> <p><img src="/assets/img/OpenMQTTGateway_auto_discovery_BLE_Sensor_Home_Assistant.e80531f8.gif" alt="Home Assistant Auto Discovery"></p> <p><img src="/assets/img/OpenMQTTGateway_Home_Assistant_MQTT_discovery.e0225c4f.png" alt="Home Assistant Auto Discovery"></p> <p>::: info
The Bluetooth and the RTL_433 gateway will create automatically devices and entities, the RF gateway will create DeviceTrigger.
The OpenMQTTGateway will also be available as a device to monitor its parameters and control it. The sensors (DHT for example) and actuators (relays) are attached to the gateway.</p> <p>30 minutes after its activation the auto discovery will be automatically deactivated, you can reactivate it from the gateway controls.
Some devices may require a button push or motion/contact event to trigger a message and generate the auto discovery.
:::</p> <h2 id="rtl-433-auto-discovery-specificity"><a href="#rtl-433-auto-discovery-specificity" class="header-anchor">#</a> RTL_433 auto discovery specificity</h2> <p>Even if the RTL_433 gateway will create automatically the devices and entities, you may loose the link to them when you change the batteries. This is proper to the RF devices. In this case new device and entities will be created. You may bypass this by creating entities through manual configuration that filter following the device model and other parameters and don't take into account the id.
Example:</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;+/+/RTL_433toMQTT/WS2032/+&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>instead of</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;+/+/RTL_433toMQTT/WS2032/47998&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Note also that the sensor may leverage channels, types or subtypes, they can be used in the filtering
Example:
In the example below 9 is the <code>subtype</code> and 1 is the <code>channel</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;+/+/RTL_433toMQTT/Prologue-TH/9/1/+&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>instead of</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;+/+/RTL_433toMQTT/Prologue-TH/9/1/215&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Alternatively the rssi signal could be used also.</p> <h2 id="mqtt-device-trigger-and-rf"><a href="#mqtt-device-trigger-and-rf" class="header-anchor">#</a> MQTT Device Trigger and RF</h2> <p>With OpenMQTTGateway <a href="/setitup/rf.html">configured to receive RF signals</a> the messages are transmitted as indicated by <a href="/use/rf.html#rcswitch-based-gateway">RCSwitch based gateway</a>, so it is possible to receive a pulse every time the sensor discover a signal.</p> <p>With autodiscovery enabled, HomeAssistant will discover a <a href="https://www.home-assistant.io/integrations/device_trigger.mqtt/" target="_blank" rel="noopener noreferrer">MQTT Device Trigger<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> identified by the value field given in the mqtt argument.</p> <h2 id="manual-integration-examples"><a href="#manual-integration-examples" class="header-anchor">#</a> Manual integration examples</h2> <p>From @123, @finity, @denniz03, @jrockstad, @anarchking, @dkluivingh</p> <h3 id="door-sensor"><a href="#door-sensor" class="header-anchor">#</a> Door sensor</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">binary_sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;test&quot;</span>
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;home/OpenMQTTGateway/433toMQTT&quot;</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token punctuation">-</span>
        <span class="token punctuation">{</span>% if value_json.value == '7821834' %<span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">'ON'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% elif value_json.value == '7821838' %<span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">'OFF'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% else %<span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span>states('binary_sensor.test') <span class="token punctuation">|</span> upper<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
      <span class="token key atrule">qos</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">device_class</span><span class="token punctuation">:</span> opening
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">binary_sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> doorbell
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">'home/OpenMQTTGateway/SRFBtoMQTT'</span>
      <span class="token comment">#value_template: &quot;{{ value_json.raw }}&quot;</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token punctuation">-</span> 
        <span class="token punctuation">{</span>% if value_json.value == '14163857' %<span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">'ON'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% else %<span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span>states('binary_sensor.doorbell') <span class="token punctuation">|</span> upper<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
      <span class="token key atrule">off_delay</span><span class="token punctuation">:</span> <span class="token number">30</span>
      <span class="token key atrule">device_class</span><span class="token punctuation">:</span> <span class="token string">'sound'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> light_back_sensor
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">'home/OpenMQTTGateway/SRFBtoMQTT'</span>
      <span class="token comment">#value_template: '{{ value_jason.value }}'</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token punctuation">-</span> 
        <span class="token punctuation">{</span>% if value_json.value == '1213858' %<span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">'ON'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% else %<span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span>states('binary_sensor.light_back_sensor') <span class="token punctuation">|</span> upper<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
      <span class="token key atrule">off_delay</span><span class="token punctuation">:</span> <span class="token number">5</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> rf_outlet_sensor
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">'home/OpenMQTTGateway/SRFBtoMQTT'</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token punctuation">-</span> 
        <span class="token punctuation">{</span>% if value_json.value == '16766303' %<span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">'ON'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% else %<span class="token punctuation">}</span> 
          <span class="token punctuation">{</span><span class="token punctuation">{</span>states('binary_sensor.rf_outlet_sensor') <span class="token punctuation">|</span> upper<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="motion-sensor"><a href="#motion-sensor" class="header-anchor">#</a> Motion sensor</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">binary_sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;Bewegung_Schlafzimmer&quot;</span>
      <span class="token comment">#device_class: motion</span>
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;home/OpenMQTTGateway1/HCSR501toMQTT&quot;</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token string">'{{ value_json[&quot;presence&quot;] }}'</span>
      <span class="token key atrule">payload_on</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
      <span class="token key atrule">payload_off</span><span class="token punctuation">:</span> <span class="token string">&quot;false&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="switches"><a href="#switches" class="header-anchor">#</a> Switches</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#switches</span>
<span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">switch</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Plug1
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;home/OpenMQTTGateway/SRFBtoMQTT&quot;</span>
      <span class="token key atrule">command_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;home/OpenMQTTGateway/commands/MQTTtoSRFB&quot;</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token string">&quot;{{ value_json.value }}&quot;</span>
      <span class="token key atrule">payload_on</span><span class="token punctuation">:</span> <span class="token string">'{&quot;value&quot;:4546575}'</span>
      <span class="token key atrule">payload_off</span><span class="token punctuation">:</span> <span class="token string">'{&quot;value&quot;:4546572}'</span>
      <span class="token key atrule">state_on</span><span class="token punctuation">:</span> <span class="token number">4546575</span>
      <span class="token key atrule">state_off</span><span class="token punctuation">:</span> <span class="token number">4546572</span>
      <span class="token key atrule">qos</span><span class="token punctuation">:</span> <span class="token string">&quot;0&quot;</span>
      <span class="token key atrule">retain</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="mijia-thermometer-ble"><a href="#mijia-thermometer-ble" class="header-anchor">#</a> Mijia Thermometer BLE</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;mijia_thermometer_temperature&quot;</span>
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">'home/OpenMQTTGateway/BTtoMQTT/AAAAAAAAAAAA'</span> <span class="token comment"># MQTT topic, check MQTT messages; replace AA... with id (BLE MAC) of your device</span>
      <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> <span class="token string">'°C'</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token string">'{{ value_json.tem | is_defined }}'</span>
      <span class="token key atrule">expire_after</span><span class="token punctuation">:</span> <span class="token number">21600</span> <span class="token comment"># 6 hours</span>
      <span class="token key atrule">force_update</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;mijia_thermometer_humidity&quot;</span>
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">'home/OpenMQTTGateway/BTtoMQTT/AAAAAAAAAAAA'</span>
      <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> <span class="token string">'%'</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token string">'{{ value_json.hum | is_defined }}'</span>
      <span class="token key atrule">expire_after</span><span class="token punctuation">:</span> <span class="token number">21600</span> <span class="token comment"># 6 hours</span>
      <span class="token key atrule">force_update</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;mijia_thermometer_battery&quot;</span>
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">'home/OpenMQTTGateway/BTtoMQTT/AAAAAAAAAAAA'</span>
      <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> <span class="token string">'%'</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token string">'{{ value_json.batt | is_defined }}'</span>
      <span class="token key atrule">expire_after</span><span class="token punctuation">:</span> <span class="token number">21600</span> <span class="token comment"># 6 hours</span>
      <span class="token key atrule">force_update</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="xiaomi-mi-scale-v2-ble-xmtzc05hm"><a href="#xiaomi-mi-scale-v2-ble-xmtzc05hm" class="header-anchor">#</a> Xiaomi Mi Scale V2 BLE (XMTZC05HM)</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;Weight&quot;</span>
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;home/OpenMQTTGateway/BTtoMQTT/AAAAAAAAAAAA&quot;</span> <span class="token comment"># replace your MQTT topic here</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token string">'{{ value_json[&quot;weight&quot;] }}'</span>
      <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> <span class="token string">&quot;kg&quot;</span>
      <span class="token key atrule">icon</span><span class="token punctuation">:</span> mdi<span class="token punctuation">:</span>weight<span class="token punctuation">-</span>kilogram
    
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;Impedance&quot;</span>
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;home/OpenMQTTGateway/BTtoMQTT/AAAAAAAAAAAA&quot;</span> <span class="token comment"># replace your MQTT topic here also</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token string">'{{ value_json[&quot;impedance&quot;] }}'</span>
      <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> <span class="token string">&quot;Ohm&quot;</span>
      <span class="token key atrule">icon</span><span class="token punctuation">:</span> mdi<span class="token punctuation">:</span>omega
    
<span class="token key atrule">template</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">body_mass_index</span><span class="token punctuation">:</span>
      <span class="token key atrule">friendly_name</span><span class="token punctuation">:</span> <span class="token string">'Body Mass Index'</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token punctuation">-</span>
        <span class="token punctuation">{</span>% set HEIGHT = (1.76)<span class="token punctuation">|</span>float %<span class="token punctuation">}</span> <span class="token comment"># replace your height in meters</span>
        <span class="token punctuation">{</span>% set WEIGHT = states('sensor.xmtzc05hm_weight')<span class="token punctuation">|</span>float %<span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> (WEIGHT/(HEIGHT<span class="token important">*HEIGHT))|float|round(1)</span> <span class="token punctuation">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">icon_template</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
        {{ 'mdi:human' }}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="mqtt-room-presence"><a href="#mqtt-room-presence" class="header-anchor">#</a> MQTT Room Presence</h3> <p>The publication into presence topic needs to be activated <a href="/use/ble.html">here is the command</a></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">sensor</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> mqtt_room
    <span class="token key atrule">device_id</span><span class="token punctuation">:</span> XX<span class="token punctuation">:</span>XX<span class="token punctuation">:</span>XX<span class="token punctuation">:</span>XX<span class="token punctuation">:</span>XX<span class="token punctuation">:</span>XX   <span class="token comment">#Mac Address of device wanting to track</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> you_are_in    <span class="token comment"># home assistant will show a sensor named (you are in) with its value being the name you gave the gateway</span>
    <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;home/presence&quot;</span>
    <span class="token comment">#timeout:</span>
    <span class="token comment">#away_timeout:</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="temperature-sensor"><a href="#temperature-sensor" class="header-anchor">#</a> Temperature sensor</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mqtt</span><span class="token punctuation">:</span>
  <span class="token key atrule">sensor</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> outdoor temp
      <span class="token key atrule">state_topic</span><span class="token punctuation">:</span> <span class="token string">&quot;home/OpenMQTTGateway/433toMQTT&quot;</span>
      <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> <span class="token string">'°C'</span>
      <span class="token key atrule">value_template</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
        {% if value_json is defined and value_json.sensor == 125 %}
          {{ value_json.tempc }}
        {% else %}
          {{ states('sensor.outdoor_temp') }}
        {% endif %}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/1technophile/OpenMQTTGateway/edit/development/docs/integrate/home_assistant.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/13/2024, 2:00:58 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/integrate/openhab3.html" class="prev">
        Integrate OPENHAB 3/4
      </a></span> <span class="next"><a href="/integrate/node_red.html">
        Integrate Node-Red
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5c4eae9b.js" defer></script><script src="/assets/js/2.fdf4d158.js" defer></script><script src="/assets/js/8.9c531400.js" defer></script>
  </body>
</html>
